<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.springframework.org/schema/jdbc">
<head>
    <meta charset="UTF-8">
    <title>柳职考试平台</title>
    <link rel="stylesheet" href="layui-v2.5.5/layui/css/layui.css">
</head>
<body class="layui-layout-body">

<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo">柳职考试系统</div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
            <li class="layui-nav-item"><a onclick="MzzHome()">首页</a></li>
            <li class="layui-nav-item"><a onclick="Exam()">考试管理</a></li>
            <li class="layui-nav-item"><a onclick="examinationPaper()">试卷管理</a></li>
            <li class="layui-nav-item"><a onclick="User()">用户管理</a></li>
            <li class="layui-nav-item">
                <a href="javascript:;">其它系统</a>
                <dl class="layui-nav-child">
                    <dd><a href="">邮件管理</a></dd>
                    <dd><a href="">消息管理</a></dd>
                    <dd><a href="">授权管理</a></dd>
                </dl>
            </li>
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
                    好帅
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="">基本资料</a></dd>
                    <dd><a href="">安全设置</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item"><a href="">注销</a></li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul class="layui-nav layui-nav-tree" lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <a class="" href="javascript:;">题库</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:;">Android基础</a></dd>
                        <dd><a href="javascript:;">IOS基础</a></dd>
                        <dd><a href="javascript:;">SpringMVC</a></dd>
                        <dd><a href="">超链接</a></dd>
                    </dl>
                </li>

                <li class="layui-nav-item"><a href="">易错题</a></li>
                <li class="layui-nav-item"><a href="">待开发</a></li>
            </ul>
        </div>
    </div>


    <!-- 首页的盒子  默认显示首页 不隐藏 -->
    <div id="home" class="layui-body">
        <!-- 内容主体区域 -->

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>跨域--------------------中国图书馆</legend>
        </fieldset>

             <iframe id="Mzzcontent" src="http://www.chnlib.com/" scrolling="no" width="100%"></iframe>

        <div class="layui-footer">
            <!-- 底部固定区域 -->
            © lzzy.net - 毕业设计
        </div>
    </div>

    <!--    考试管理盒子-->
    <div id="exam" class="layui-body" style="display: none;">
        <!-- 内容主体区域 -->

        <div id="thetest">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>考试管理</legend>
        </fieldset>
        <div class="demoTable">
            搜索考试名字：
            <div class="layui-inline">
                <input class="layui-input" name="id" id="demoReload5" autocomplete="off">
            </div>
            <button class="layui-btn" data-type="reload">搜索</button>
        </div>

        <table class="layui-hide" id="demo5" lay-filter="test5"></table>
        <script type="text/html" id="barDemo5">
            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
            <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
        </script>

        </div>

        <div id="addthetest" style="display: none;">

            <button class="layui-btn" onclick="returnTheText()" > <-返回试卷 </button>
            <form class="layui-form" id="formTestPager">

                <div class="layui-form-item">
                    <label class="layui-form-label">ID</label>
                    <div class="layui-input-block">
                        <input readonly="readonly" id="TheTextID" style="display: none;" type="text" name="uid" lay-verify="required" lay-reqtext="ID是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">考试名字</label>
                    <div class="layui-input-block">
                        <input type="text" name="theName" lay-verify="required" lay-reqtext="考试名字是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>

                <div class="layui-inline">
                    <label class="layui-form-label">选择开始时间</label>
                    <div class="layui-input-inline">
                        <input type="text" name="theStartTime" class="layui-input" id="test5" placeholder="yyyy-MM-dd HH:mm:ss">
                    </div>
                </div>
                <br>
                <div class="layui-inline">
                    <label class="layui-form-label">选择结束时间</label>
                    <div class="layui-input-inline">
                        <input type="text" name="theEndOfTime" class="layui-input" id="test6" placeholder="yyyy-MM-dd HH:mm:ss">
                    </div>
                </div>


                <div class="layui-form-item">
                    <label class="layui-form-label">状态</label>
                    <div class="layui-input-block">
                        <select name="State" lay-filter="aihao">
                            <option value="" selected=""></option>
                            <option value="已经结束">已经结束</option>
                            <option value="正在进行" >正在进行</option>
                            <option value="没有开始">没有开始</option>
                        </select>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">选择题目</label>
                    <div class="layui-input-block">
                        <select id="mzzhtml" name="TestPaperID" lay-filter="aihao">
                            <option value="" selected=""></option>
                        </select>
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button type="button" onclick=AddTestPager("AddTheTestJson") class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
                    </div>
                </div>
            </form>

        </div>

    </div>


    <!--    试卷管理得盒子-->
    <div id="examinationPaper" class="layui-body" style="display: none;">

        <!--  试卷盒子 默认显示  -->
        <div id="TestPaperDiv">
        <!-- 内容主体区域 -->
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>试卷管理</legend>
        </fieldset>

            <div class="demoTable" >
                搜索试卷编号：
                <div class="layui-inline">
                    <input class="layui-input" name="id" id="demoReload2" autocomplete="off">
                </div>
                <button class="layui-btn" data-type="reload">搜索</button>
            </div>
            <table class="layui-hide" id="demo3" lay-filter="test3"></table>
        </div>

<!--             题目盒子 默认隐藏    -->
        <div id="ExerciseDiv" style="display: none;">
            <!-- 内容主体区域 -->
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
                <legend>题目管理</legend>
            </fieldset>
            <button class="layui-btn" onclick="TestPaper()" > <-返回试卷 </button>
            <div class="demoTable">
                搜索编号：
                <div class="layui-inline">
                    <input class="layui-input" name="id" id="demoReload1" autocomplete="off">
                </div>
                <button class="layui-btn" data-type="reload">搜索</button>
            </div>
            <table class="layui-hide" id="demo2" lay-filter="test2"></table>
            <!--        <script type="text/html" id="switchTpl">-->
            <!--            &lt;!&ndash; 这里的 checked 的状态只是演示 &ndash;&gt;-->
            <!--            <input type="checkbox" name="sex" value="{{d.id}}" lay-skin="switch" lay-text="女|男" lay-filter="sexDemo" {{ d.id == 10003 ? 'checked' : '' }}>-->
            <!--        </script>-->
            <script type="text/html" id="checkboxTpl">
                <!-- 这里的 checked 的状态只是演示 -->
                <input type="checkbox" name="lock" value="{{d.id}}" title="锁定" lay-filter="lockDemo" {{ d.studentNumber == 201703130152 ? 'checked' : '' }}>
            </script>
        </div>

    </div>

    <!--    用户管理的盒子-->
    <div id="useraDministration" class="layui-body" style="display: none;">
        <!-- 内容主体区域 -->
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>用户管理</legend>
        </fieldset>

        <div class="demoTable">
            搜索学号：
            <div class="layui-inline">
                <input class="layui-input" name="id" id="demoReload" autocomplete="off">
            </div>
            <button class="layui-btn" data-type="reload">搜索</button>
        </div>

        <table class="layui-hide" id="demo" lay-filter="test"></table>

        <script type="text/html" id="barDemo">
            <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
            <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
            <a class="layui-btn layui-btn-sm" lay-event="reload">重载</a>
        </script>


    </div>

    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>

    <script src="layui-v2.5.5/layui/layui.js"></script>
    <!--th:inline="none"-->

    <!-- 考试  TheTest -->
    <script th:inline="none">
        layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider'], function () {
            var laydate = layui.laydate //日期
                , laypage = layui.laypage //分页
                , layer = layui.layer //弹层
                , table = layui.table //表格
                , carousel = layui.carousel //轮播
                , upload = layui.upload //上传
                , element = layui.element //元素操作
                , slider = layui.slider //滑块
            //监听Tab切换
            element.on('tab(demo5)', function (data) {
                layer.tips('切换了 ' + data.index + '：' + this.innerHTML, this, {
                    tips: 1
                });
            });
            //执行一个 table 实例
            table.render({
                elem: '#demo5'
                //  , height: 650 TestPaperJson
                , url: '/home/TheTestJson?val=' //数据接口
                , title: '用户表'
                , page: true //开启分页
                //  , limits: [20, 30, 40]
                //   , limit: 20 //每页默认显示的数量
                , toolbar: 'default' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
                , totalRow: false //开启合计行
                , cols: [[ //表头
                    {type: 'checkbox', fixed: 'left'}
                    , {field: 'uid', title: 'ID', width: 80, fixed: 'left', totalRowText: '合计：'}
                    , {field: 'theName', title: '考试名字', width: 200, sort: true, totalRow: true}
                    , {field: 'theStartTime', title: '考试开始时间', width: 200}
                    , {field: 'theEndOfTime', title: '考试结束时间', width: 200, totalRow: true}
                    , {field: 'TestPaperID', title: '试卷ID', width: 200, totalRow: true}
                    , {field: 'State', title: '考试状态', width: 150, sort: true}

                    , {fixed: 'right', width: 200, align: 'center', toolbar: '#barDemo'}
                ]], id: 'testReload5'
            });

            var $ = layui.$, active = {
                reload: function(){
                    var demoReload = $('#demoReload5');
                    //执行重载
                    table.reload('testReload5', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                        ,url: '/home/TheTestJson?val='+demoReload.val()
                        // ,where: {
                        //     key: {
                        //        studentNumber: demoReload.val()
                        //     }
                        // }
                    }, 'data');
                }
            };
            $('.demoTable .layui-btn').on('click', function(){
                var type = $(this).data('type');
                active[type] ? active[type].call(this) : '';
            });

            //监听头工具栏事件
            table.on('toolbar(test5)', function (obj) {
                var checkStatus = table.checkStatus(obj.config.id)
                    , data = checkStatus.data; //获取选中的数据
                switch (obj.event) {
                    case 'add':
                        layer.msg('添加');
                        // TheTestPopout("/home/AddUser", "添加信息", "", "", "")
                        AddTheTest();
                        CanceTheTextID();
                        break;
                    case 'update':
                        if (data.length === 0) {
                            layer.msg('请选择一行');
                        } else if (data.length > 1) {
                            layer.msg('只能同时编辑一个');
                        } else {
                            layer.alert('编辑 [studentNumber]：' + checkStatus.data[0].studentNumber);
                        }
                        break;
                    case 'delete':
                        if (data.length === 0) {
                            layer.msg('请选择一行');
                        } else {
                            layer.msg('删除');
                        }
                        break;

                }
                ;
            });

            //监听行工具事件
            table.on('tool(test5)', function (obj) { //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
                var data = obj.data //获得当前行数据
                    , layEvent = obj.event; //获得 lay-event 对应的值
                if (layEvent === 'detail') {
                    layer.msg('查看操作' + data.id);
                } else if (layEvent === 'del') {
                    layer.confirm('真的删除行么', function (index) {
                        //向服务端发送删除指令
                        deleteTheTest("/home/deleteTheTest", data.uid);
                        obj.del(); //删除对应行（tr）的DOM结构
                        layer.close(index);

                    });
                } else if (layEvent === 'edit') {
                    layer.msg('编辑操作');
                    //在这里面输入任何合法的js语句
                    AddTheTest();
                    TheTextID();
                } else if (layEvent == "reload") {
                    layer.msg('重载');
                    // window.location.href="/home/home";
                    //   var demoReload = $('#demoReload');
                    //执行重载
                    table.reload('testReload', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                    }, 'data');
                }
            });
        });

    </script>

    <!-- 试卷  TestPager -->
    <script th:inline="none">
       function AddTestPager(URl) {
           $.ajax({
               //几个参数需要注意一下
               type: "POST",//方法类型
               dataType: "json",//预期服务器返回的数据类型
               url: URl,//url
               data: $('#formTestPager').serialize(),
               success: function (data) {
                   console.log(data.name);//打印服务端返回的数据(调试用)
                   alert(data.name);
               },
               error: function () {
                   alert("异常！");
               }
           });
       }
        
        var TestPagerVar;
        layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider'], function () {
            var laydate = layui.laydate //日期
                , laypage = layui.laypage //分页
                , layer = layui.layer //弹层
                , table = layui.table //表格
                , carousel = layui.carousel //轮播
                , upload = layui.upload //上传
                , element = layui.element //元素操作
                , slider = layui.slider //滑块
            //执行一个 table 实例
            table.render({
                elem: '#demo3'
                //  , height: 650
                , url: '/home/TestPaperJson?val=' //数据接口
                , title: '试卷表'
                , page: true //开启分页
                //  , limits: [20, 30, 40]
                //   , limit: 20 //每页默认显示的数量
                , toolbar: 'default' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
                , totalRow: false //开启合计行
                , cols: [[ //表头
                    {type: 'checkbox', fixed: 'left'}
                    , {field: 'id', title: 'ID', width: 80, fixed: 'left', totalRowText: '合计：'}
                    , {field: 'tid', title: '试卷编号', width: 110, sort: true, totalRow: true}
                    , {field: 'tname', title: '试卷名字', width: 200}
                    , {field: 'introduce', title: '介绍', width: 250, totalRow: true}
                    , {fixed: 'right', width: 200, align: 'center', toolbar: '#barDemo'}
                ]], id: 'testReload4'
            });
            //监听行单击事件（双击事件为：rowDouble）（单击为row）
            table.on('rowDouble(test3)', function(obj){
                var data = obj.data;
                // layer.alert(JSON.stringify(data), {
                //     title: '当前行数据：'
                // });
                //标注选中样式
                // obj.tr.addClass('layui-table-click').siblings().removeClass('layui-table-click');
                //执行重载
                table.reload('testReload3', {
                    page: {
                        curr: 1 //重新从第 1 页开始
                    }
                    ,url: '/home/ExerciseJson?val='+data.tid
                    // ,where: {
                    //     key: {
                    //        studentNumber: demoReload.val()
                    //     }
                    // }
                }, 'data');
                examination();
                TestPagerVar = data.tid;
            });
            var $ = layui.$, active = {
                reload: function(){
                    var demoReload = $('#demoReload2');
                    //执行重载
                    table.reload('testReload4', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                        ,url: '/home/TestPaperJson?val='+demoReload.val()
                        // ,where: {
                        //     key: {
                        //        studentNumber: demoReload.val()
                        //     }
                        // }
                    }, 'data');
                }
            };
            $('.demoTable .layui-btn').on('click', function(){
                var type = $(this).data('type');
                active[type] ? active[type].call(this) : '';
            });
            //监听头工具栏事件
            table.on('toolbar(test3)', function (obj) {
                var checkStatus = table.checkStatus(obj.config.id)
                    , data = checkStatus.data; //获取选中的数据
                switch (obj.event) {
                    case 'add':
                        layer.msg('添加');
                        PopoutTestPager("/home/AddTestPager", "添加试卷", "", "", "")
                        break;
                    case 'update':
                        if (data.length === 0) {
                            layer.msg('请选择一行');
                        } else if (data.length > 1) {
                            layer.msg('只能同时编辑一个');
                        } else {
                            layer.alert('编辑 [studentNumber]：' + checkStatus.data[0].studentNumber);
                        }
                        break;
                    case 'delete':
                        if (data.length === 0) {
                            layer.msg('请选择一行');
                        } else {
                            layer.msg('删除');
                        }
                        break;
                }
                ;
            });
            //监听行工具事件
            table.on('tool(test3)', function (obj) { //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
                var data = obj.data //获得当前行数据
                    , layEvent = obj.event; //获得 lay-event 对应的值
                if (layEvent === 'detail') {
                    layer.msg('查看操作' + data.id);
                } else if (layEvent === 'del') {
                    layer.confirm('真的删除行么', function (index) {
                        //向服务端发送删除指令
                        deleteTestPager("/home/deleteTestPager", data.tid);
                        obj.del(); //删除对应行（tr）的DOM结构
                        layer.close(index);
                    });
                } else if (layEvent === 'edit') {
                    layer.msg('编辑操作');
                    //在这里面输入任何合法的js语句
                    PopoutTestPager("updateTestPager", "更新信息", data.tid, "readonly=\"readonly\"", "update")
                } else if (layEvent == "reload") {
                    layer.msg('重载');
                    //执行重载
                    table.reload('testReload4', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                    }, 'data');
                }
            });
        });
        </script>

    <!-- 试题  Exercise -->
    <script th:inline="none">
        layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider'], function () {
            var laydate = layui.laydate //日期
                , laypage = layui.laypage //分页
                , layer = layui.layer //弹层
                , table = layui.table //表格
                , carousel = layui.carousel //轮播
                , upload = layui.upload //上传
                , element = layui.element //元素操作
                , slider = layui.slider //滑块
            //执行一个 table 实例
            table.render({
                elem: '#demo2'
                //  , height: 650
                , url: '/home/ExerciseJson?val=' //数据接口
                , title: '试卷表'
                , page: true //开启分页
                //  , limits: [20, 30, 40]
                //   , limit: 20 //每页默认显示的数量
                , toolbar: 'default' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
                , totalRow: false //开启合计行
                , cols: [[ //表头
                    {type: 'checkbox', fixed: 'left'}
                    , {field: 'id', title: 'ID', width: 80, fixed: 'left', totalRowText: '合计：'}
                    , {field: 'sid', title: '试卷编号', width: 110}
                    , {field: 'tid', title: '题目编号', width: 110, sort: true, totalRow: true}
                    , {field: 'question', title: '问题', width: 200}
                    , {field: 'answer', title: '正确回答', width: 80, totalRow: true}
                    , {field: 'item1', title: '选项A', width: 80}
                    , {field: 'item2', title: '选项B', width: 80}
                    , {field: 'item3', title: '选项C', width: 80}
                    , {field: 'item4', title: '选项D', width: 80}
                    , {field: 'explains', title: '解析', width: 250}
                    , {field: 'url', title: '图片URL', width: 120, sort: true, totalRow: true}
                    , {fixed: 'right', width: 200, align: 'center', toolbar: '#barDemo'}
                ]], id: 'testReload3'
            });
            //监听行单击事件（双击事件为：rowDouble）
            // table.on('row(test2)', function(obj){
            //     var data = obj.data;
            //     layer.alert(JSON.stringify(data), {
            //         title: '当前行数据：'
            //     });
            //     //标注选中样式
            //     obj.tr.addClass('layui-table-click').siblings().removeClass('layui-table-click');
            // });

            var $ = layui.$, active = {
                reload: function(){
                    var demoReload = $('#demoReload1');
                    var demoReloadVar = demoReload.val();
                    if (demoReloadVar == "" || demoReloadVar == null){
                        demoReloadVar = TestPagerVar;
                        //执行重载
                        table.reload('testReload3', {
                            page: {
                                curr: 1 //重新从第 1 页开始
                            }
                            ,url: '/home/ExerciseJson?val='+demoReloadVar

                        }, 'data');
                    } else{
                        //执行重载
                        table.reload('testReload3', {
                            page: {
                                curr: 1 //重新从第 1 页开始
                            }
                            ,url: '/home/GetExerciseJson?val='+demoReloadVar
                        }, 'data');
                    }

                }
            };
            $('.demoTable .layui-btn').on('click', function(){
                var type = $(this).data('type');
                active[type] ? active[type].call(this) : '';
            });

            //监听头工具栏事件
            table.on('toolbar(test2)', function (obj) {
                var checkStatus = table.checkStatus(obj.config.id)
                    , data = checkStatus.data; //获取选中的数据
                switch (obj.event) {
                    case 'add':
                        layer.msg('添加');
                        PopoutExercise("/home/AddExercise", "添加信息", "", "", "",TestPagerVar)
                        break;
                    case 'update':
                        if (data.length === 0) {
                            layer.msg('请选择一行');
                        } else if (data.length > 1) {
                            layer.msg('只能同时编辑一个');
                        } else {
                            layer.alert('编辑 [studentNumber]：' + checkStatus.data[0].studentNumber);
                        }
                        break;
                    case 'delete':
                        if (data.length === 0) {
                            layer.msg('请选择一行');
                        } else {
                            layer.msg('删除');
                        }
                        break;
                };
            });

            //监听行工具事件
            table.on('tool(test2)', function (obj) { //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
                var data = obj.data //获得当前行数据
                    , layEvent = obj.event; //获得 lay-event 对应的值
                if (layEvent === 'detail') {
                    layer.msg('查看操作' + data.id);
                } else if (layEvent === 'del') {
                    layer.confirm('真的删除行么', function (index) {
                        //向服务端发送删除指令
                        deleteExercise("/home/deleteExercise", data.tid);
                        obj.del(); //删除对应行（tr）的DOM结构
                        layer.close(index);
                    });
                } else if (layEvent === 'edit') {
                    layer.msg('编辑操作');
                    //在这里面输入任何合法的js语句
                    PopoutExercise("updateExercise", "更新信息", data.tid, "readonly=\"readonly\"", "update",data.sid)
                } else if (layEvent == "reload") {
                    layer.msg('重载');
                    // window.location.href="/home/home";
                    //   var demoReload = $('#demoReload');
                    //执行重载
                    table.reload('testReload', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                    }, 'data');
                }
            });
        });
    </script>

    <!-- 用户  User -->
    <script th:inline="none">
        layui.use(['laydate', 'laypage', 'layer', 'table', 'carousel', 'upload', 'element', 'slider'], function () {
            var laydate = layui.laydate //日期
                , laypage = layui.laypage //分页
                , layer = layui.layer //弹层
                , table = layui.table //表格
                , carousel = layui.carousel //轮播
                , upload = layui.upload //上传
                , element = layui.element //元素操作
                , slider = layui.slider //滑块
            //向世界问个好
            layer.msg('欢迎登录');
            //监听Tab切换
            element.on('tab(demo)', function (data) {
                layer.tips('切换了 ' + data.index + '：' + this.innerHTML, this, {
                    tips: 1
                });
            });
            //执行一个 table 实例
            table.render({
                elem: '#demo'
              //  , height: 650
                , url: '/home/userjson?val=' //数据接口
                , title: '用户表'
                , page: true //开启分页
              //  , limits: [20, 30, 40]
              //   , limit: 20 //每页默认显示的数量
                , toolbar: 'default' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
                , totalRow: false //开启合计行
                , cols: [[ //表头
                    {type: 'checkbox', fixed: 'left'}
                    , {field: 'id', title: 'ID', width: 80, fixed: 'left', totalRowText: '合计：'}
                    , {field: 'studentNumber', title: '学号', width: 150, sort: true, totalRow: true}
                    , {field: 'username', title: '用户名', width: 80}
                    , {field: 'email', title: '邮箱', width: 150, totalRow: true}
                    , {field: 'phone', title: '手机号', width: 150, totalRow: true}
                    , {field: 'sex', title: '性别', width: 80, sort: true}
                    , {field: 'city', title: '城市', width: 150}
                    , {field: 'sign', title: '签名', width: 250}
                    , {field: 'classify', title: '职业', width: 80}
                    , {field: 'wealth', title: '财富', width: 80, sort: true, totalRow: true}
                    , {fixed: 'right', width: 200, align: 'center', toolbar: '#barDemo'}
                ]], id: 'testReload'
            });



            var $ = layui.$, active = {
                reload: function(){
                    var demoReload = $('#demoReload');
                    //执行重载
                    table.reload('testReload', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                        ,url: '/home/userjson?val='+demoReload.val()
                        // ,where: {
                        //     key: {
                        //        studentNumber: demoReload.val()
                        //     }
                        // }
                    }, 'data');
                }
            };
            $('.demoTable .layui-btn').on('click', function(){
                var type = $(this).data('type');
                active[type] ? active[type].call(this) : '';
            });

            //监听头工具栏事件
            table.on('toolbar(test)', function (obj) {
                var checkStatus = table.checkStatus(obj.config.id)
                    , data = checkStatus.data; //获取选中的数据
                switch (obj.event) {
                    case 'add':
                        layer.msg('添加');
                        Popout("/home/AddUser", "添加信息", "", "", "")
                        break;
                    case 'update':
                        if (data.length === 0) {
                            layer.msg('请选择一行');
                        } else if (data.length > 1) {
                            layer.msg('只能同时编辑一个');
                        } else {
                            layer.alert('编辑 [studentNumber]：' + checkStatus.data[0].studentNumber);
                        }
                        break;
                    case 'delete':
                        if (data.length === 0) {
                            layer.msg('请选择一行');
                        } else {
                            layer.msg('删除');
                        }
                        break;

                }
                ;
            });

            //监听行工具事件
            table.on('tool(test)', function (obj) { //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
                var data = obj.data //获得当前行数据
                    , layEvent = obj.event; //获得 lay-event 对应的值
                if (layEvent === 'detail') {
                    layer.msg('查看操作' + data.id);
                } else if (layEvent === 'del') {
                    layer.confirm('真的删除行么', function (index) {
                        //向服务端发送删除指令
                        deleteUser("/home/deleteUser", data.studentNumber);

                        obj.del(); //删除对应行（tr）的DOM结构
                        layer.close(index);

                    });
                } else if (layEvent === 'edit') {
                    layer.msg('编辑操作');
                    //在这里面输入任何合法的js语句
                    Popout("updateUser", "更新信息", data.studentNumber, "readonly=\"readonly\"", "update")
                } else if (layEvent == "reload") {
                    layer.msg('重载');
                    // window.location.href="/home/home";
                    //   var demoReload = $('#demoReload');
                    //执行重载
                    table.reload('testReload', {
                        page: {
                            curr: 1 //重新从第 1 页开始
                        }
                    }, 'data');
                }
            });
        });

    </script>

    <!--   封装起来的弹框-->
    <script>

        //封装起来的弹框User
        function TheTestPopout(MzzURL, title, studentNumber, mzzStyle, identifying) {
            if (studentNumber == "") {
                studentNumber = "输入新的学号"
            }
            layer.open({
                type: 1 //Page层类型
                , area: ['500px', '300px']
                , title: title + studentNumber
                , shade: 0.6 //遮罩透明度
                , maxmin: true //允许全屏最小化
                , anim: 1 //0-6的动画形式，-1不开启
                , content: '<form class="layui-form" id="form11" action="#" method ="Post">\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">学号</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" value="' + studentNumber + ' " name="studentNumber" lay-verify="required" lay-reqtext="学号是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input" ' + mzzStyle + '>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">用户名</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="username" lay-verify="required" lay-reqtext="用户名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '<div class="layui-inline">\n' +
                    '      <label class="layui-form-label">时间选择器</label>\n' +
                    '      <div class="layui-input-inline">\n' +
                    '        <input type="text" class="layui-input" id="test4" placeholder="HH:mm:ss">\n' +
                    '      </div>\n' +
                    '   </div>'+
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">城市</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="city" lay-verify="required" lay-reqtext="邮箱是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <div class="layui-inline">\n' +
                    '      <label class="layui-form-label">验证手机</label>\n' +
                    '      <div class="layui-input-inline">\n' +
                    '        <input type="tel" name="phone" lay-verify="required|phone" autocomplete="off" class="layui-input">\n' +
                    '      </div>\n' +
                    '    </div>\n' +
                    '    <div class="layui-inline">\n' +
                    '      <label class="layui-form-label">验证邮箱</label>\n' +
                    '      <div class="layui-input-inline">\n' +
                    '        <input type="text" name="email" lay-verify="email" autocomplete="off" class="layui-input">\n' +
                    '      </div>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">签名</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="sign" lay-verify="required" lay-reqtext="签名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">职业</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="classify" lay-verify="required" lay-reqtext="职业是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">财富</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="wealth" lay-verify="required" lay-reqtext="职业是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">单选框</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="radio" name="sex" value="男" title="男" checked="">\n' +
                    '      <input type="radio" name="sex" value="女" title="女">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <button type="button" onclick=mzzSubmit("' + MzzURL + '","' + identifying + '") class="layui-btn"   lay-submit="" lay-filter="demo1">立即提交</button>\n' +
                    '      <button type="reset"  class="layui-btn layui-btn-primary">重置</button>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '</form>'
            });
        }

        //封装起来的弹框User
        function Popout(MzzURL, title, studentNumber, mzzStyle, identifying) {
            if (studentNumber == "") {
                studentNumber = "输入新的学号"
            }
            layer.open({
                type: 1 //Page层类型
                , area: ['500px', '300px']
                , title: title + studentNumber
                , shade: 0.6 //遮罩透明度
                , maxmin: true //允许全屏最小化
                , anim: 1 //0-6的动画形式，-1不开启
                , content: '<form class="layui-form" id="form11" action="#" method ="Post">\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">学号</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" value="' + studentNumber + ' " name="studentNumber" lay-verify="required" lay-reqtext="学号是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input" ' + mzzStyle + '>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">用户名</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="username" lay-verify="required" lay-reqtext="用户名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '<div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">密码</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="password" name="passWord" placeholder="请输入密码" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  ' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">城市</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="city" lay-verify="required" lay-reqtext="邮箱是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <div class="layui-inline">\n' +
                    '      <label class="layui-form-label">验证手机</label>\n' +
                    '      <div class="layui-input-inline">\n' +
                    '        <input type="tel" name="phone" lay-verify="required|phone" autocomplete="off" class="layui-input">\n' +
                    '      </div>\n' +
                    '    </div>\n' +
                    '    <div class="layui-inline">\n' +
                    '      <label class="layui-form-label">验证邮箱</label>\n' +
                    '      <div class="layui-input-inline">\n' +
                    '        <input type="text" name="email" lay-verify="email" autocomplete="off" class="layui-input">\n' +
                    '      </div>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">签名</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="sign" lay-verify="required" lay-reqtext="签名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">职业</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="classify" lay-verify="required" lay-reqtext="职业是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">财富</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="wealth" lay-verify="required" lay-reqtext="职业是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">单选框</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="radio" name="sex" value="男" title="男" checked="">\n' +
                    '      <input type="radio" name="sex" value="女" title="女">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <button type="button" onclick=mzzSubmit("' + MzzURL + '","' + identifying + '") class="layui-btn"   lay-submit="" lay-filter="demo1">立即提交</button>\n' +
                    '      <button type="reset"  class="layui-btn layui-btn-primary">重置</button>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '</form>'
            });
        }

        //封装起来的弹框TestPager
        function PopoutTestPager(MzzURL, title, tid, mzzStyle, identifying) {
            if (tid == "") {
                tid = "输入新的试卷编号"
            }
            layer.open({
                type: 1 //Page层类型
                , area: ['500px', '300px']
                , title: title + tid
                , shade: 0.6 //遮罩透明度
                , maxmin: true //允许全屏最小化
                , anim: 1 //0-6的动画形式，-1不开启
                , content: '<form class="layui-form" id="formTestPager" action="#" method ="Post">\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">试卷编号</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" value="' + tid + ' " name="tid" lay-verify="required" lay-reqtext="试卷是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input" ' + mzzStyle + '>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">试卷名字</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="tname" lay-verify="required" lay-reqtext="试卷名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  ' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">说明</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="introduce" lay-verify="required" lay-reqtext="说明是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <button type="button" onclick=TestPagerSubmit("' + MzzURL + '","' + identifying + '") class="layui-btn"   lay-submit="" lay-filter="demo1">立即提交</button>\n' +
                    '      <button type="reset"  class="layui-btn layui-btn-primary">重置</button>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '</form>'
            });
        }

        //封装起来的弹框Exercise
        function PopoutExercise(MzzURL, title, tid, mzzStyle, identifying,sid) {
            if (tid == "") {
                tid = "输入新的试卷编号"
            }
            layer.open({
                type: 1 //Page层类型
                , area: ['500px', '300px']
                , title: title + tid
                , shade: 0.6 //遮罩透明度
                , maxmin: true //允许全屏最小化
                , anim: 1 //0-6的动画形式，-1不开启
                , content: '<form class="layui-form" id="formExercise" action="#" method ="Post">\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">所属试卷编号</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" value="' + sid + ' " name="sid" lay-verify="required" lay-reqtext="试卷是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input" ' + mzzStyle + '>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">习题编号</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" value="' + tid + ' " name="tid" lay-verify="required" lay-reqtext="试卷是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input" ' + mzzStyle + '>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">问题</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="question" lay-verify="required" lay-reqtext="试卷名是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  ' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">答案</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="answer" lay-verify="required" lay-reqtext="说明是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">选项A</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="item1" lay-verify="required" lay-reqtext="说明是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">选项B</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="item2" lay-verify="required" lay-reqtext="说明是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">选项C</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="item3" lay-verify="required" lay-reqtext="说明是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">选项D</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="item4" lay-verify="required" lay-reqtext="说明是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">解析</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="explains" lay-verify="required" lay-reqtext="说明是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <label class="layui-form-label">图片URL</label>\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <input type="text" name="url" lay-verify="required" lay-reqtext="说明是必填项，岂能为空？" placeholder="请输入" autocomplete="off" class="layui-input">\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '  <div class="layui-form-item">\n' +
                    '    <div class="layui-input-block">\n' +
                    '      <button type="button" onclick=ExerciseSubmit("' + MzzURL + '","' + identifying + '") class="layui-btn"   lay-submit="" lay-filter="demo1">立即提交</button>\n' +
                    '      <button type="reset"  class="layui-btn layui-btn-primary">重置</button>\n' +
                    '    </div>\n' +
                    '  </div>\n' +
                    '</form>'
            });
        }

        /// User 添加 和 修改 Ajax
        function mzzSubmit(MzzURL, mzzStyle) {
            if (mzzStyle.length > 0) {
                $.ajax({
                    //几个参数需要注意一下
                    type: "POST",//方法类型
                    dataType: "json",//预期服务器返回的数据类型
                    url: MzzURL,//url
                    data: $('#form11').serialize(),
                    success: function (data) {
                        console.log(data.name);//打印服务端返回的数据(调试用)
                        alert(data.name);
                    },
                    error: function () {
                        alert("异常！");
                    }
                });
            } else {
                $.ajax({
                    //几个参数需要注意一下
                    type: "POST",//方法类型
                    dataType: "json",//预期服务器返回的数据类型
                    url: MzzURL,//url
                    data: $('#form11').serialize(),
                    success: function (data) {
                        console.log(data.name);//打印服务端返回的数据(调试用)
                        alert(data.name);
                    },
                    error: function () {
                        alert("异常！");
                    }
                });
            }
        }
        //  User 删除的Ajax
        function deleteUser(MzzURL, studentNumber) {
            $.ajax({
                //几个参数需要注意一下
                type: "POST",//方法类型
                dataType: "json",//预期服务器返回的数据类型
                url: MzzURL,//url
                data: {"studentNumber": studentNumber},
                success: function (data) {
                    console.log(data.name);//打印服务端返回的数据(调试用)
                    alert(data.name);
                },
                error: function () {
                    alert("异常！");
                }
            });
        }


        ///  TestPager 添加 和 修改 Ajax
        function TestPagerSubmit(MzzURL, mzzStyle) {
            if (mzzStyle.length > 0) {
                $.ajax({
                    //几个参数需要注意一下
                    type: "POST",//方法类型
                    dataType: "json",//预期服务器返回的数据类型
                    url: MzzURL,//url
                    data: $('#formTestPager').serialize(),
                    success: function (data) {
                        console.log(data.name);//打印服务端返回的数据(调试用)
                        alert(data.name);
                    },
                    error: function () {
                        alert("异常！");
                    }
                });
            } else {
                $.ajax({
                    //几个参数需要注意一下
                    type: "POST",//方法类型
                    dataType: "json",//预期服务器返回的数据类型
                    url: MzzURL,//url
                    data: $('#formTestPager').serialize(),
                    success: function (data) {
                        console.log(data.name);//打印服务端返回的数据(调试用)
                        alert(data.name);
                    },
                    error: function () {
                        alert("异常！");
                    }
                });
            }
        }
        ///  TestPager 删除
        function deleteTestPager(MzzURL, tid) {
            $.ajax({
                //几个参数需要注意一下
                type: "POST",//方法类型
                dataType: "json",//预期服务器返回的数据类型
                url: MzzURL,//url
                data: {"tid": tid},
                success: function (data) {
                    console.log(data.name);//打印服务端返回的数据(调试用)
                    alert(data.name);
                },
                error: function () {
                    alert("异常！");
                }
            });
        }

        ///  Exercise 添加 和 修改 Ajax
        function ExerciseSubmit(MzzURL, mzzStyle) {
            if (mzzStyle.length > 0) {
                $.ajax({
                    //几个参数需要注意一下
                    type: "POST",//方法类型
                    dataType: "json",//预期服务器返回的数据类型
                    url: MzzURL,//url
                    data: $('#formExercise').serialize(),
                    success: function (data) {
                        console.log(data.name);//打印服务端返回的数据(调试用)
                        alert(data.name);
                    },
                    error: function () {
                        alert("异常！");
                    }
                });
            } else {
                $.ajax({
                    //几个参数需要注意一下
                    type: "POST",//方法类型
                    dataType: "json",//预期服务器返回的数据类型
                    url: MzzURL,//url
                    data: $('#formExercise').serialize(),
                    success: function (data) {
                        console.log(data.name);//打印服务端返回的数据(调试用)
                        alert(data.name);
                    },
                    error: function () {
                        alert("异常！");
                    }
                });
            }
        }
        ///  Exercise 删除
        function deleteExercise(MzzURL, tid) {
            $.ajax({
                //几个参数需要注意一下
                type: "POST",//方法类型
                dataType: "json",//预期服务器返回的数据类型
                url: MzzURL,//url
                data: {"tid": tid},
                success: function (data) {
                    console.log(data.name);//打印服务端返回的数据(调试用)
                    alert(data.name);
                },
                error: function () {
                    alert("异常！");
                }
            });
        }

        ///  Exercise 删除
        function deleteTheTest(MzzURL, uid) {
            $.ajax({
                //几个参数需要注意一下
                type: "POST",//方法类型
                dataType: "json",//预期服务器返回的数据类型
                url: MzzURL,//url
                data: {"uid": uid},
                success: function (data) {
                    console.log(data.name);//打印服务端返回的数据(调试用)
                    alert(data.name);
                },
                error: function () {
                    alert("异常！");
                }
            });
        }


    </script>





    <script>
        var myArrayName=new Array()
        var myArrayID=new Array()
        var divA = document.getElementById("mzzhtml");
            $.ajax({
                //几个参数需要注意一下
                type: "Get",//方法类型
                dataType: "json",//预期服务器返回的数据类型

                url: "/home/TestPaperJson?val=",//url
                async: false,
                success: function (data) {

                    var count = data.count
                    for (var q=0;q<count;q++){
                        myArrayName[q] = data.data[q].tname
                        myArrayID[q] = data.data[q].tid
                    }
                    console.log(myArrayName);//打印服务端返回的数据(调试用)
                    console.log(myArrayID);//打印服务端返回的数据(调试用)
                    for(var i=0;i<myArrayName.length ;i++){
                        divA.innerHTML = divA.innerHTML+'<h3> <option value=" '+myArrayID[i] +' "> '+"试卷名字"+myArrayName[i]+" ID:"+myArrayID[i]+'</option></h3>';
                    }
                },
                error: function () {
                    alert("异常！");
                }
            });

        function TheTextID() {
            document.getElementById("TheTextID").style.display = "";
        }
        function  CanceTheTextID() {
            document.getElementById("TheTextID").style.display = "none";
        }
        
        function returnTheText() {
            document.getElementById("thetest").style.display = "";
            document.getElementById("addthetest").style.display = "none";
        }


        // add试卷
        function AddTheTest() {
            document.getElementById("thetest").style.display = "none";
            document.getElementById("addthetest").style.display = "";

        }

        function Exam() {
            document.getElementById("home").style.display = "none";//隐藏首页
            document.getElementById("examinationPaper").style.display = "none";//隐藏试卷页面
            document.getElementById("useraDministration").style.display = "none";//隐藏用户
            document.getElementById("exam").style.display = "";//显示考试盒子
        }

        // 试卷管理
        function examinationPaper() {
            document.getElementById("home").style.display = "none";//隐藏首页
            document.getElementById("examinationPaper").style.display = "";//显示试卷页面
            document.getElementById("useraDministration").style.display = "none";//隐藏用户
            document.getElementById("exam").style.display = "none";//隐藏考试盒子
        }

        // 用户管理
        function User() {
            document.getElementById("home").style.display = "none";//隐藏首页
            document.getElementById("examinationPaper").style.display = "none";//隐藏试卷页面
            document.getElementById("useraDministration").style.display = "";//显示用户
            document.getElementById("exam").style.display = "none";//隐藏考试盒子
        }

        // 显示习题盒子
        function examination () {
            document.getElementById("TestPaperDiv").style.display = "none";
            document.getElementById("ExerciseDiv").style.display = "";
        }

        // 显示试卷盒子
        function TestPaper () {
            document.getElementById("TestPaperDiv").style.display = "";//显示试题盒子
            document.getElementById("ExerciseDiv").style.display = "none";//隐藏试卷盒子
        }
       // 主页
        function MzzHome() {
            document.getElementById("home").style.display = "";
            document.getElementById("examinationPaper").style.display = "none";
            document.getElementById("useraDministration").style.display = "none";
            document.getElementById("exam").style.display = "none";
        }

        // 解析：将你嵌入页面的高度设置成屏幕可视高度减去原框架顶部和底部高度（宽度设置同理）。
        reSerSize();
        window.onresize = reSerSize();
        // 跨域HTML 代码
        function reSerSize() {
            var windowsheight = window.innerHeight;
            document.getElementById("Mzzcontent").style.height = (windowsheight - 50) + "px";
        }

        //JavaScript代码区域
        layui.use('element', function () {
            var element = layui.element;
        });

    </script>



    <script>
        layui.use('laydate', function(){
            var laydate = layui.laydate;

            //常规用法
            laydate.render({
                elem: '#test1'
            });

            //国际版
            laydate.render({
                elem: '#test1-1'
                ,lang: 'en'
            });

            //年选择器
            laydate.render({
                elem: '#test2'
                ,type: 'year'
            });

            //年月选择器
            laydate.render({
                elem: '#test3'
                ,type: 'month'
            });

            //时间选择器
            laydate.render({
                elem: '#test4'
                ,type: 'time'
            });

            //日期时间选择器
            laydate.render({
                elem: '#test5'
                ,type: 'datetime'
            });
            //日期时间选择器
            laydate.render({
                elem: '#test6'
                ,type: 'datetime'
            });
            //日期范围
            laydate.render({
                elem: '#test6'
                ,range: true
            });

            //年范围
            laydate.render({
                elem: '#test7'
                ,type: 'year'
                ,range: true
            });

            //年月范围
            laydate.render({
                elem: '#test8'
                ,type: 'month'
                ,range: true
            });

            //时间范围
            laydate.render({
                elem: '#test9'
                ,type: 'time'
                ,range: true
            });

            //日期时间范围
            laydate.render({
                elem: '#test10'
                ,type: 'datetime'
                ,range: true
            });

            //自定义格式
            laydate.render({
                elem: '#test11'
                ,format: 'yyyy年MM月dd日'
            });
            laydate.render({
                elem: '#test12'
                ,format: 'dd/MM/yyyy'
            });
            laydate.render({
                elem: '#test13'
                ,format: 'yyyyMMdd'
            });
            laydate.render({
                elem: '#test14'
                ,type: 'time'
                ,format: 'H点m分'
            });
            laydate.render({
                elem: '#test15'
                ,type: 'month'
                ,range: '~'
                ,format: 'yyyy-MM'
            });
            laydate.render({
                elem: '#test16'
                ,type: 'datetime'
                ,range: '到'
                ,format: 'yyyy年M月d日H时m分s秒'
            });

            //开启公历节日
            laydate.render({
                elem: '#test17'
                ,calendar: true
            });

            //自定义重要日
            laydate.render({
                elem: '#test18'
                ,mark: {
                    '0-10-14': '生日'
                    ,'0-12-31': '跨年' //每年的日期
                    ,'0-0-10': '工资' //每月某天
                    ,'0-0-15': '月中'
                    ,'2017-8-15': '' //如果为空字符，则默认显示数字+徽章
                    ,'2099-10-14': '呵呵'
                }
                ,done: function(value, date){
                    if(date.year === 2017 && date.month === 8 && date.date === 15){ //点击2017年8月15日，弹出提示语
                        layer.msg('这一天是：中国人民抗日战争胜利72周年');
                    }
                }
            });

            //限定可选日期
            var ins22 = laydate.render({
                elem: '#test-limit1'
                ,min: '2016-10-14'
                ,max: '2080-10-14'
                ,ready: function(){
                    ins22.hint('日期可选值设定在 <br> 2016-10-14 到 2080-10-14');
                }
            });

            //前后若干天可选，这里以7天为例
            laydate.render({
                elem: '#test-limit2'
                ,min: -7
                ,max: 7
            });

            //限定可选时间
            laydate.render({
                elem: '#test-limit3'
                ,type: 'time'
                ,min: '09:30:00'
                ,max: '17:30:00'
                ,btns: ['clear', 'confirm']
            });

            //同时绑定多个
            lay('.test-item').each(function(){
                laydate.render({
                    elem: this
                    ,trigger: 'click'
                });
            });

            //初始赋值
            laydate.render({
                elem: '#test19'
                ,value: '1989-10-14'
                ,isInitValue: true
            });

            //选中后的回调
            laydate.render({
                elem: '#test20'
                ,done: function(value, date){
                    layer.alert('你选择的日期是：' + value + '<br>获得的对象是' + JSON.stringify(date));
                }
            });

            //日期切换的回调
            laydate.render({
                elem: '#test21'
                ,change: function(value, date){
                    layer.msg('你选择的日期是：' + value + '<br><br>获得的对象是' + JSON.stringify(date));
                }
            });
            //不出现底部栏
            laydate.render({
                elem: '#test22'
                ,showBottom: false
            });

            //只出现确定按钮
            laydate.render({
                elem: '#test23'
                ,btns: ['confirm']
            });

            //自定义事件
            laydate.render({
                elem: '#test24'
                ,trigger: 'mousedown'
            });

            //点我触发
            laydate.render({
                elem: '#test25'
                ,eventElem: '#test25-1'
                ,trigger: 'click'
            });

            //双击我触发
            lay('#test26-1').on('dblclick', function(){
                laydate.render({
                    elem: '#test26'
                    ,show: true
                    ,closeStop: '#test26-1'
                });
            });

            //日期只读
            laydate.render({
                elem: '#test27'
                ,trigger: 'click'
            });

            //非input元素
            laydate.render({
                elem: '#test28'
            });

            //墨绿主题
            laydate.render({
                elem: '#test29'
                ,theme: 'molv'
            });

            //自定义颜色
            laydate.render({
                elem: '#test30'
                ,theme: '#393D49'
            });

            //格子主题
            laydate.render({
                elem: '#test31'
                ,theme: 'grid'
            });


            //直接嵌套显示
            laydate.render({
                elem: '#test-n1'
                ,position: 'static'
            });
            laydate.render({
                elem: '#test-n2'
                ,position: 'static'
                ,lang: 'en'
            });
            laydate.render({
                elem: '#test-n3'
                ,type: 'month'
                ,position: 'static'
            });
            laydate.render({
                elem: '#test-n4'
                ,type: 'time'
                ,position: 'static'
            });
        });
    </script>


</body>

</html>